#!/bin/sh

projectRoot=$(a="/$0"; a=${a%/*}; a=${a:-.}; a=${a#/}/; cd "$a/.." || return; pwd)

imageName=defra/ffc-jenkins-pipeline-library-semantic-release

docker build --tag $imageName --file semantic-release.Dockerfile .

echo "Current branch: $(git branch --show-current)"

docker run -t --rm -v "$projectRoot"/scripts:/home/node/wrk/scripts \
  -e GH_TOKEN="$GH_TOKEN" $imageName --debug --dry-run --branches psd-1013-global-install-2
